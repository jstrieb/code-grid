<!--
  Created by Jacob Strieb.
  Fall 2024 - Fall 2025
-->
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spreadsheet</title>

    <!-- TODO: other meta tags -->

    <!--
      Prefer rectangular opengraph photo, so use it first and last. Applications
      may pick the square one if they prefer that resolution, but shouldn't pick
      it based on ordering.
    -->
    <meta
      property="og:image"
      content="https://jstrieb.github.io/code-grid/opengraph.png"
    />
    <meta property="og:image:alt" content="Code Grid" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta
      property="og:image"
      content="https://jstrieb.github.io/code-grid/favicon-512.png"
    />
    <meta property="og:image:alt" content="Code Grid" />
    <meta property="og:image:width" content="512" />
    <meta property="og:image:height" content="512" />
    <meta
      property="og:image"
      content="https://jstrieb.github.io/code-grid/opengraph.png"
    />
    <meta property="og:image:alt" content="Code Grid" />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- 
      Favicons seem to be picked from last to first, so put the best ones last.
    -->
    <link
      rel="apple-touch-icon"
      type="image/png"
      sizes="512x512"
      href="/favicon-512.png"
    />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png" />
    <link rel="icon" type="image/png" sizes="128x128" href="/favicon-128.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/favicon-512.png" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="manifest" href="/manifest.json" />
  </head>
  <body>
    <div
      style="
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 1em;
        height: 100%;
      "
    >
      <img
        width="64"
        height="64"
        src="data:image/svg+xml,%3Csvg version='1.1' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'%3E%3C!-- %3Cstyle%3E@media (prefers-color-scheme: dark) %7B g %7B filter: invert(); %7D %7D%3C/style%3E --%3E%3Cg transform='matrix(.9794 0 0 .9794 .3293 .3293)'%3E%3Crect x='3.9869' y='3.9869' width='28.35' height='28.35' fill='%23fff'/%3E%3Crect x='4.3289' y='4.3289' width='27.666' height='27.666' stroke='%23000' stroke-width='.010417' fill='%23000'/%3E%3Crect x='-.33623' y='-.33623' width='29.338' height='29.338' fill='%23fff'/%3E%3Crect x='.5' y='.5' width='27.666' height='27.666' fill='%23fff' stroke='%23000'/%3E%3Cpath d='m21.611 12.864h-14.556v-3.0525h14.556zm0 5.9911h-14.556v-3.0525h14.556z' fill='%23000'/%3E%3C/g%3E%3C/svg%3E"
      />
      <p>Loading...</p>
    </div>
  </body>
  <script type="module">
    import { mount } from "svelte";

    import "./src/global.css";
    import App from "./src/App.svelte";
    import { decompressText } from "./src/lib/compress.js";

    // Decompression must be async, so we wait until it's complete to initialize
    // and mount the main component. The globals object is created when the App
    // is initialized, and relies on the decompressed data.
    decompressText(window.location.hash.slice(1))
      .catch((e) => {
        console.error(e);
        return undefined;
      })
      .then((urlData) => {
        document.body.innerHTML = "";
        const app = mount(App, {
          target: document.body,
          props: { urlData },
        });
      });
  </script>
</html>
